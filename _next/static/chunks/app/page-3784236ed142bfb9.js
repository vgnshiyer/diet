(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9123:function(e,t,s){Promise.resolve().then(s.bind(s,3298))},3056:function(e,t,s){"use strict";var l=s(7437),a=s(1268);s(2265),t.Z=e=>{let{children:t,onClick:s,className:r,faIcon:n}=e;return(0,l.jsxs)("button",{onClick:s,className:"text-black font-semibold px-4 py-2 mt-4 ".concat(r),children:[t,n&&(0,l.jsx)(a.G,{icon:n,className:"ml-2"})]})}},1138:function(e,t,s){"use strict";var l=s(7437);s(2265);var a=s(1268);t.Z=e=>{let{children:t,onClick:s,className:r,faIcon:n}=e;return(0,l.jsxs)("button",{onClick:s,className:"border-white border-[1px] bg-primary text-contrast font-semibold px-4 py-2 mt-4 rounded-md ".concat(r," hover:bg-secondary text-base md:text-lg"),children:[t,n&&(0,l.jsx)(a.G,{icon:n,className:"ml-2"})]})}},3298:function(e,t,s){"use strict";s.d(t,{default:function(){return f}});var l=s(7437),a=s(1234),r=s(5217),n=s(9376),o=s(2265),c=s(1138),i=s(1268),d=s(3056),m=e=>{let{meal:t,index:s,onRemoveMeal:a,onRemoveFoodItem:n,onAddItem:o}=e;return(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 font-bold text-black",children:[(0,l.jsx)("h3",{className:"text-base",children:"Meal ".concat(s+1)}),(0,l.jsx)("h2",{className:"text-xl",children:t.name.toUpperCase()})]}),(0,l.jsx)(d.Z,{className:"!mt-8 !text-red-500",onClick:()=>a(s,t.name),faIcon:r.$aW,children:"Delete Meal"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full bg-white rounded-lg",children:[(0,l.jsx)("thead",{children:["Food Item","Quantity (g)","Calories (kcal)","Carbs (g)","Fats (g)","Protein (g)",""].map((e,t)=>(0,l.jsx)("th",{className:"py-2 px-4 text-left text-sm font-bold text-gray-500",children:e},t))}),(0,l.jsx)("tbody",{children:t.foodItems.map((e,t)=>{let a="py-2 px-4 border-b border-gray-200 text-gray-800 font-semibold text-sm";return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:a,children:e.name}),(0,l.jsx)("td",{className:a,children:e.quantity}),(0,l.jsxs)("td",{className:a,children:[e.nutrition.calories," kcal"]}),(0,l.jsxs)("td",{className:a,children:[e.nutrition.carbs," g"]}),(0,l.jsxs)("td",{className:a,children:[e.nutrition.fats," g"]}),(0,l.jsxs)("td",{className:a,children:[e.nutrition.protein," g"]}),(0,l.jsx)("td",{className:a,children:(0,l.jsx)(d.Z,{className:"!mt-0 !text-red-500 !font-semibold !text-sm",onClick:()=>n(s,t,e.name),children:(0,l.jsx)(i.G,{icon:r.$aW})})})]},t)})})]})}),(0,l.jsx)(d.Z,{className:"!mt-1",onClick:()=>o(s),faIcon:r.r8p,children:"Add Item"})]})},x=e=>{let{children:t,onClick:s,className:a,faIcon:r}=e;return(0,l.jsxs)("button",{onClick:s,className:"bg-white text-black font-semibold px-4 py-2 mt-4 rounded-md ".concat(a," hover:bg-gray-200"),children:[t,r&&(0,l.jsx)(i.G,{icon:r,className:"ml-2"})]})},u=e=>{let{meals:t,className:s}=e,a=t.reduce((e,t)=>(t.foodItems.forEach(t=>{e.calories=Number((e.calories+t.nutrition.calories).toFixed(2)),e.carbs=Number((e.carbs+t.nutrition.carbs).toFixed(2)),e.fats=Number((e.fats+t.nutrition.fats).toFixed(2)),e.protein=Number((e.protein+t.nutrition.protein).toFixed(2))}),e),{calories:0,carbs:0,fats:0,protein:0});return(0,l.jsxs)("div",{className:"p-4 md:p-8 rounded-lg border flex flex-col justify-between bg-primary h-full ".concat(s),children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2 md:mb-6",children:"Summary"}),(0,l.jsxs)("div",{className:"flex flex-row sm:flex-col justify-between gap-2 md:gap-4",children:[(0,l.jsxs)("div",{className:"bg-blue-50 p-2 rounded-md text-center w-full",children:[(0,l.jsx)("p",{className:"font-semibold text-blue-900 text-xs md:text-sm",children:"Calories"}),(0,l.jsxs)("p",{className:"font-bold text-blue-700 text-sm md:text-base",children:[a.calories," kcal"]})]}),(0,l.jsxs)("div",{className:"bg-green-50 p-2 rounded-md text-center w-full",children:[(0,l.jsx)("p",{className:"font-semibold text-green-900 text-xs md:text-sm",children:"Carbs"}),(0,l.jsxs)("p",{className:"font-bold text-green-700 text-sm md:text-base",children:[a.carbs," g"]})]}),(0,l.jsxs)("div",{className:"bg-yellow-50 p-2 rounded-md text-center w-full",children:[(0,l.jsx)("p",{className:"font-semibold text-yellow-900 text-xs md:text-sm",children:"Fats"}),(0,l.jsxs)("p",{className:"font-bold text-yellow-700 text-sm md:text-base",children:[a.fats," g"]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 p-2 rounded-md text-center w-full",children:[(0,l.jsx)("p",{className:"font-semibold text-purple-900 text-xs md:text-sm",children:"Protein"}),(0,l.jsxs)("p",{className:"font-bold text-purple-700 text-sm md:text-base",children:[a.protein," g"]})]})]}),(0,l.jsx)(x,{className:"!mt-2 md:!mt-6",onClick:()=>{let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download="diet.json",l.click(),URL.revokeObjectURL(s)},faIcon:r.q7m,children:"Export Diet"})]})},f=()=>{let{meals:e,setMeals:t,setSelectedMealIndex:s}=(0,a.I)(),i=(0,n.useRouter)(),[d,x]=(0,o.useState)(!1),[f,b]=(0,o.useState)(""),h=(0,o.useRef)(null),p=(s,l)=>{if(confirm("Are you sure you want to remove ".concat(l,"?"))){let l=[...e];l.splice(s,1),t(l)}},j=(s,l,a)=>{if(confirm("Are you sure you want to remove ".concat(a,"?"))){let a=[...e];a[s].foodItems.splice(l,1),t(a)}},N=e=>{s(e),i.push("/search")};return(0,l.jsxs)("div",{className:"p-4 rounded-lg max-w-7xl mx-auto",children:[(0,l.jsx)("div",{className:"text-sm text-gray-600 bg-gray-100 p-3 rounded-md mb-4",children:(0,l.jsx)("p",{children:"Your diet is automatically saved in your browser's local storage. You can export it anytime as a JSON file for backup."})}),(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",ref:h,accept:".json",onChange:e=>{var s;let l=null===(s=e.target.files)||void 0===s?void 0:s[0];if(l){let e=new FileReader;e.onload=e=>{var s;t(JSON.parse(null===(s=e.target)||void 0===s?void 0:s.result)),alert("Diet imported!")},e.readAsText(l)}},className:"hidden"}),(0,l.jsx)(c.Z,{onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},faIcon:r.Vmj,className:"!mt-0",children:"Import Diet"})]}),(0,l.jsx)(c.Z,{className:"ml-2 md:ml-4 !mt-0",onClick:()=>{b(""),x(!0)},faIcon:r.r8p,children:"Add Meal"})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsx)(u,{className:"sm:hidden",meals:e}),(0,l.jsx)("div",{className:"bg-gray-200 rounded-lg p-4 w-full sm:w-2/3",children:e.map((e,t)=>(0,l.jsx)(m,{meal:e,index:t,onRemoveMeal:p,onRemoveFoodItem:j,onAddItem:N},t))}),(0,l.jsx)(u,{className:"hidden sm:block",meals:e})]}),d&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center",children:(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg w-[90%] md:w-1/2",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add New Meal"}),(0,l.jsx)("input",{type:"text",value:f,onChange:e=>b(e.target.value),placeholder:"Enter meal name",className:"border border-black p-2 w-full mb-4 rounded text-gray-800",autoFocus:!0}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)(c.Z,{className:"!bg-red-500 hover:!bg-red-600",onClick:()=>x(!1),faIcon:r.g82,children:"Cancel"}),(0,l.jsx)(c.Z,{onClick:()=>{f.trim()&&(t([...e,{name:f.trim(),foodItems:[]}]),x(!1))},faIcon:r.r8p,children:"Add"})]})]})})]})}},1234:function(e,t,s){"use strict";s.d(t,{I:function(){return o},w:function(){return n}});var l=s(7437),a=s(2265);let r=(0,a.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,a.useState)([]),[o,c]=(0,a.useState)(!1),[i,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem("meals");e&&n(JSON.parse(e)),c(!0)},[]),(0,a.useEffect)(()=>{o&&localStorage.setItem("meals",JSON.stringify(s))},[s,o]),(0,l.jsx)(r.Provider,{value:{meals:s,setMeals:n,selectedMealIndex:i,setSelectedMealIndex:d,addFoodItemToMeal:e=>{if(null!==i){let t=[...s];t[i].foodItems.push(e),n(t)}}},children:t})},o=()=>{let e=(0,a.useContext)(r);if(!e)throw Error("useMealContext must be used within a MealProvider");return e}},9376:function(e,t,s){"use strict";var l=s(5475);s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[676,268,971,117,744],function(){return e(e.s=9123)}),_N_E=e.O()}]);