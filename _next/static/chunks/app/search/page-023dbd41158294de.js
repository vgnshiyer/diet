(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{4150:function(e,t,a){Promise.resolve().then(a.bind(a,3076))},3076:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(7437),s=a(1234),l=a(7498),r=a(9376),o=a(2265),i=a(5217),c=a(1268),d=a(3145),m=a(1138),u=e=>{let{selectedItem:t,foodItem:a,quantity:s,onQuantityChange:l,onClose:r,onAdd:o,onQuantityIncrement:u,onQuantityDecrement:x}=e,f=e=>Number((e*s).toFixed(2));return(0,n.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-[90%] md:w-[750px] flex flex-col md:flex-row overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex-1 p-6 ml-4 mt-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4 text-black",children:t.foodName}),(0,n.jsx)(d.default,{src:t.thumbnail,alt:t.foodName,width:200,height:200,className:"rounded-lg w-1/2 md:w-full md:h-auto",loader:e=>{let{src:t,width:a,quality:n}=e;return"".concat(t,"?w=").concat(a,"&q=").concat(n||75)}}),"brandName"in t&&t.brandName&&(0,n.jsxs)("p",{className:"text-sm text-black mt-2 md:mt-0 font-bold",children:["By ",t.brandName]})]}),(0,n.jsxs)("div",{className:"flex-1 bg-gray-50 flex flex-col p-6",children:[(0,n.jsxs)("div",{className:"mb-2 md:mb-6",children:[(0,n.jsx)("label",{className:"text-md font-semibold mb-2 block !text-black",children:"Quantity (g)"}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{value:s,onChange:l,className:"border border-black text-black p-2 rounded-lg w-24 text-center font-bold",min:"1"}),(0,n.jsxs)("div",{className:"flex flex-col ml-2",children:[(0,n.jsx)("button",{onClick:u,className:"text-black h-6",children:(0,n.jsx)(c.G,{icon:i.mTx})}),(0,n.jsx)("button",{onClick:x,className:"text-black h-6",children:(0,n.jsx)(c.G,{icon:i.ptq})})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 md:gap-4 mb-2 md:mb-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,n.jsx)("p",{className:"text-sm md:text-md text-blue-900 font-bold",children:"Total Calories"}),(0,n.jsxs)("p",{className:"text-md md:text-xl font-bold text-blue-700",children:[f(a.nutrition.calories)," kcal"]})]}),(0,n.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,n.jsx)("p",{className:"text-sm md:text-md text-green-900 font-bold",children:"Total Carbs"}),(0,n.jsxs)("p",{className:"text-md md:text-xl font-bold text-green-700",children:[f(a.nutrition.carbs)," g"]})]}),(0,n.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[(0,n.jsx)("p",{className:"text-sm md:text-md text-purple-900 font-bold",children:"Total Protein"}),(0,n.jsxs)("p",{className:"text-md md:text-xl font-bold text-purple-700",children:[f(a.nutrition.protein)," g"]})]}),(0,n.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[(0,n.jsx)("p",{className:"text-sm md:text-md text-yellow-900 font-bold",children:"Total Fats"}),(0,n.jsxs)("p",{className:"text-md md:text-xl font-bold text-yellow-700",children:[f(a.nutrition.fats)," g"]})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-auto",children:[(0,n.jsx)(m.Z,{className:"!bg-red-500 hover:!bg-red-600",onClick:r,faIcon:i.g82,children:"Cancel"}),(0,n.jsx)(m.Z,{onClick:o,faIcon:i.r8p,children:"Add Item"})]})]})]})})},x=a(3056),f=e=>{let{searchResult:t,onSelect:a}=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(d.default,{src:t.thumbnail,alt:t.foodName,width:100,height:100,loader:e=>{let{src:t,width:a,quality:n}=e;return"".concat(t,"?w=").concat(a,"&q=").concat(n||75)}}),(0,n.jsxs)("div",{className:"flex flex-col justify-center flex-1 px-4",children:[(0,n.jsx)("h1",{className:"font-semibold text-black",children:t.foodName}),"brandName"in t&&(0,n.jsxs)("p",{className:"text-gray-600 text-sm",children:["By ",(0,n.jsx)("span",{className:"font-bold",children:t.brandName})]}),"calories"in t&&(0,n.jsxs)("p",{className:"text-gray-600 text-sm",children:[(0,n.jsx)("span",{className:"text-green-600",children:t.calories})," calories"]})]}),(0,n.jsx)(x.Z,{onClick:a,faIcon:i.r8p,className:"!mt-0",children:"Add item"})]})},h=()=>{let{addFoodItemToMeal:e,selectedMealIndex:t}=(0,s.I)(),[a,d]=(0,o.useState)(""),[x,h]=(0,o.useState)([]),[b,p]=(0,o.useState)(null),[N,g]=(0,o.useState)(null),[j,y]=(0,o.useState)(1),v=(0,r.useRouter)();(0,o.useEffect)(()=>{null===t&&v.push("/")},[]);let w=async()=>{if(""===a.trim())return;let e=await (0,l.w6)(a);e&&h(e)},k=async e=>{y(1),p(e);let t=await (0,l.S2)("branded"===e.type?e.itemId:e.foodName,e.type);t&&g({name:e.foodName,quantity:1,nutrition:t.nutrition})};return(0,n.jsxs)("div",{className:"p-4 max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"relative flex items-center mb-4",children:[(0,n.jsx)("div",{className:"absolute left-3",children:(0,n.jsx)(c.G,{icon:i.Y$T,className:"text-gray-500"})}),(0,n.jsx)("input",{type:"text",value:a,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w()},placeholder:"Search for a food item",className:"pl-10 pr-20 py-3 w-full border border-black text-gray-800 rounded-lg text-lg"}),(0,n.jsx)(m.Z,{onClick:w,className:"absolute right-2 !mt-0",children:"Search"})]}),x.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)("ul",{children:x.map((e,t)=>(0,n.jsx)("li",{className:"mb-2",children:(0,n.jsx)(f,{searchResult:e,onSelect:()=>k(e)})},t))})}),b&&N&&(0,n.jsx)(u,{selectedItem:b,foodItem:N,quantity:j,onQuantityChange:e=>y(Number(e.target.value)),onClose:()=>p(null),onAdd:()=>{N&&(e({...N,quantity:j,nutrition:{calories:Number((N.nutrition.calories*j).toFixed(1)),carbs:Number((N.nutrition.carbs*j).toFixed(1)),fats:Number((N.nutrition.fats*j).toFixed(1)),protein:Number((N.nutrition.protein*j).toFixed(1))}}),v.push("/"))},onQuantityIncrement:()=>y(e=>e+1),onQuantityDecrement:()=>y(e=>Math.max(1,e-1))})]})};function b(){return(0,n.jsx)(h,{})}},3056:function(e,t,a){"use strict";var n=a(7437),s=a(1268);a(2265),t.Z=e=>{let{children:t,onClick:a,className:l,faIcon:r}=e;return(0,n.jsxs)("button",{onClick:a,className:"text-black font-semibold px-4 py-2 mt-4 ".concat(l),children:[t,r&&(0,n.jsx)(s.G,{icon:r,className:"ml-2"})]})}},1138:function(e,t,a){"use strict";var n=a(7437);a(2265);var s=a(1268);t.Z=e=>{let{children:t,onClick:a,className:l,faIcon:r}=e;return(0,n.jsxs)("button",{onClick:a,className:"border-white border-[1px] bg-primary text-contrast font-semibold px-4 py-2 mt-4 rounded-md ".concat(l," hover:bg-secondary text-base md:text-lg"),children:[t,r&&(0,n.jsx)(s.G,{icon:r,className:"ml-2"})]})}},1234:function(e,t,a){"use strict";a.d(t,{I:function(){return o},w:function(){return r}});var n=a(7437),s=a(2265);let l=(0,s.createContext)(void 0),r=e=>{let{children:t}=e,[a,r]=(0,s.useState)([]),[o,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("meals");e&&r(JSON.parse(e)),i(!0)},[]),(0,s.useEffect)(()=>{o&&localStorage.setItem("meals",JSON.stringify(a))},[a,o]),(0,n.jsx)(l.Provider,{value:{meals:a,setMeals:r,selectedMealIndex:c,setSelectedMealIndex:d,addFoodItemToMeal:e=>{if(null!==c){let t=[...a];t[c].foodItems.push(e),r(t)}}},children:t})},o=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useMealContext must be used within a MealProvider");return e}},7498:function(e,t,a){"use strict";a.d(t,{S2:function(){return m},w6:function(){return d},yW:function(){return c}});var n=a(3464);let s=e=>{let t=e.data.foods[0],a=t.serving_weight_grams;return{name:t.food_name,quantity:a,nutrition:{calories:t.nf_calories/a,carbs:t.nf_total_carbohydrate/a,fats:t.nf_total_fat/a,protein:t.nf_protein/a}}},l="https://trackapi.nutritionix.com/v2",r="".concat(l,"/search/instant/"),o="".concat(l,"/search/item/"),i="".concat(l,"/natural/nutrients/"),c=()=>{let e=localStorage.getItem("nutritionix_credentials");return e?JSON.parse(e):null},d=async e=>{let t=c();if(!t)throw Error("API credentials not found");try{let a=await n.Z.get(r,{params:{query:e},headers:{"Content-Type":"application/json","x-app-id":t.appId,"x-app-key":t.appKey}});return[...a.data.branded.map(e=>({foodName:e.food_name,brandName:e.brand_name,itemId:e.nix_item_id,thumbnail:e.photo.thumb,calories:e.nf_calories})),...a.data.common.map(e=>({foodName:e.food_name,thumbnail:e.photo.thumb}))]}catch(e){return console.error("Error fetching search results:",e),null}},m=async(e,t)=>{let a=c();if(!a)throw Error("API credentials not found");let l={"Content-Type":"application/json","x-app-id":a.appId,"x-app-key":a.appKey};return s("branded"===t?await n.Z.get(o,{params:{nix_item_id:e},headers:l}):await n.Z.post(i,{query:e},{headers:l}))}},9376:function(e,t,a){"use strict";var n=a(5475);a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[676,268,63,971,117,744],function(){return e(e.s=4150)}),_N_E=e.O()}]);