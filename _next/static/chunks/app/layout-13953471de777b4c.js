(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1435:function(e,t,r){Promise.resolve().then(r.bind(r,726))},726:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),n=r(8503),s=r.n(n),l=r(5217),i=r(2265),o=r(1138),c=e=>{let{onCredentialsSet:t}=e,[r,n]=(0,i.useState)({appId:"",appKey:""}),s=()=>{r.appId&&r.appKey&&(localStorage.setItem("nutritionix_credentials",JSON.stringify(r)),t())};return(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-[90%] md:w-96",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-black",children:"Welcome to Simple Diet Planner"}),(0,a.jsx)("p",{className:"mb-4 text-gray-600 font-bold",children:"To continue, please enter your Nutritionix API credentials."}),(0,a.jsxs)("p",{className:"mb-4 text-gray-600",children:["You can get one for free at the ",(0,a.jsx)("a",{href:"https://developer.nutritionix.com/signup",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"Nutritionix"})," website."]}),(0,a.jsxs)("form",{onSubmit:s,children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("label",{className:"block text-black text-sm font-bold mb-2",children:["App ID",(0,a.jsx)("input",{type:"text",value:r.appId,onChange:e=>n(t=>({...t,appId:e.target.value})),className:"mt-1 p-2 block w-full rounded-md border border-black focus:ring focus:ring-black",required:!0})]})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("label",{className:"block text-black text-sm font-bold mb-2",children:["API Key",(0,a.jsx)("input",{type:"password",value:r.appKey,onChange:e=>n(t=>({...t,appKey:e.target.value})),className:"mt-1 p-2 block w-full rounded-md border border-black focus:ring focus:ring-black",required:!0})]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(o.Z,{onClick:s,faIcon:l.r6l,children:"Save Credentials"})}),(0,a.jsxs)("small",{className:"text-gray-500 mt-2 block text-center",children:[(0,a.jsx)("span",{className:"font-bold mt-2",children:"Note:"})," Your API credentials will be stored in your browser's local storage"]})]})]})})},d=r(1268),u=()=>(0,a.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 mt-auto py-4 text-center text-sm text-white border-t bg-black",children:(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[(0,a.jsx)(d.G,{icon:l.m6i,className:"text-red-500 mr-2 text-sm w-4 h-4",width:"16",height:"16"}),"Created by "," ",(0,a.jsx)("a",{href:"https://github.com/vgnshiyer",target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-white hover:text-gray-300 underline font-semibold",children:"@vgnshiyer"})]})}),m=r(3145),x=r(7648),h=r(9089),f=()=>(0,a.jsx)("nav",{className:"bg-primary p-4",children:(0,a.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,a.jsx)(x.default,{href:"/",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.default,{src:"/logo.jpg",alt:"Diet Planner Icon",width:24,height:24,loading:"lazy",className:"object-contain"}),(0,a.jsx)("span",{className:"text-contrast text-2xl font-bold",children:"Simple Diet Planner"})]})}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)(x.default,{href:"https://github.com/vgnshiyer/simple-diet-planner/issues",target:"_blank",children:(0,a.jsx)(h.hJX,{className:"text-contrast text-2xl"})})})]})}),p=r(1234),b=r(7498);function g(e){let{children:t}=e,[r,n]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{n(!!(0,b.yW)()),o(!1)},[]);let d=(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"})}),m=l?d:r?(0,a.jsx)(p.w,{children:t}):(0,a.jsx)(c,{onCredentialsSet:()=>n(!0)});return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsx)("head",{children:(0,a.jsx)("title",{children:"Simple Diet Planner"})}),(0,a.jsxs)("body",{className:"".concat(s().className," bg-white h-screen flex flex-col"),children:[(0,a.jsx)(f,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto mb-16",children:m}),(0,a.jsx)(u,{})]})]})}r(7960)},1138:function(e,t,r){"use strict";var a=r(7437);r(2265);var n=r(1268);t.Z=e=>{let{children:t,onClick:r,className:s,faIcon:l}=e;return(0,a.jsxs)("button",{onClick:r,className:"border-white border-[1px] bg-primary text-contrast font-semibold px-4 py-2 mt-4 rounded-md ".concat(s," hover:bg-secondary text-base md:text-lg"),children:[t,l&&(0,a.jsx)(n.G,{icon:l,className:"ml-2"})]})}},1234:function(e,t,r){"use strict";r.d(t,{I:function(){return i},w:function(){return l}});var a=r(7437),n=r(2265);let s=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=localStorage.getItem("meals");e&&l(JSON.parse(e)),o(!0)},[]),(0,n.useEffect)(()=>{i&&localStorage.setItem("meals",JSON.stringify(r))},[r,i]),(0,a.jsx)(s.Provider,{value:{meals:r,setMeals:l,selectedMealIndex:c,setSelectedMealIndex:d,addFoodItemToMeal:e=>{if(null!==c){let t=[...r];t[c].foodItems.push(e),l(t)}}},children:t})},i=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("useMealContext must be used within a MealProvider");return e}},7498:function(e,t,r){"use strict";r.d(t,{S2:function(){return u},w6:function(){return d},yW:function(){return c}});var a=r(3464);let n=e=>{let t=e.data.foods[0],r=t.serving_weight_grams;return{name:t.food_name,quantity:r,nutrition:{calories:t.nf_calories/r,carbs:t.nf_total_carbohydrate/r,fats:t.nf_total_fat/r,protein:t.nf_protein/r}}},s="https://trackapi.nutritionix.com/v2",l="".concat(s,"/search/instant/"),i="".concat(s,"/search/item/"),o="".concat(s,"/natural/nutrients/"),c=()=>{let e=localStorage.getItem("nutritionix_credentials");return e?JSON.parse(e):null},d=async e=>{let t=c();if(!t)throw Error("API credentials not found");try{let r=await a.Z.get(l,{params:{query:e},headers:{"Content-Type":"application/json","x-app-id":t.appId,"x-app-key":t.appKey}});return[...r.data.branded.map(e=>({foodName:e.food_name,brandName:e.brand_name,itemId:e.nix_item_id,thumbnail:e.photo.thumb,calories:e.nf_calories})),...r.data.common.map(e=>({foodName:e.food_name,thumbnail:e.photo.thumb}))]}catch(e){return console.error("Error fetching search results:",e),null}},u=async(e,t)=>{let r=c();if(!r)throw Error("API credentials not found");let s={"Content-Type":"application/json","x-app-id":r.appId,"x-app-key":r.appKey};return n("branded"===t?await a.Z.get(i,{params:{nix_item_id:e},headers:s}):await a.Z.post(o,{query:e},{headers:s}))}},7960:function(){}},function(e){e.O(0,[510,676,699,268,63,132,971,117,744],function(){return e(e.s=1435)}),_N_E=e.O()}]);